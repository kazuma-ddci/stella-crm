# ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯stella-crmã®é‡è¦ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨˜è¿°ã—ãŸã‚‚ã®ã§ã™ã€‚

---

## ç›®æ¬¡

1. [ã‚¹ãƒ†ãƒ¼ã‚¸é·ç§»ãƒ­ã‚¸ãƒƒã‚¯](#ã‚¹ãƒ†ãƒ¼ã‚¸é·ç§»ãƒ­ã‚¸ãƒƒã‚¯)
2. [ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½](#ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½)
3. [ã‚¹ãƒ†ãƒ¼ã‚¸ç®¡ç†ãƒ¢ãƒ¼ãƒ€ãƒ«](#ã‚¹ãƒ†ãƒ¼ã‚¸ç®¡ç†ãƒ¢ãƒ¼ãƒ€ãƒ«)
4. [å¤–éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼](#å¤–éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼)
5. [ç¤¾å†…ã‚¹ã‚¿ãƒƒãƒ•èªè¨¼](#ç¤¾å†…ã‚¹ã‚¿ãƒƒãƒ•èªè¨¼)
6. [ãƒªãƒ¼ãƒ‰ç²å¾—ãƒ•ã‚©ãƒ¼ãƒ ](#ãƒªãƒ¼ãƒ‰ç²å¾—ãƒ•ã‚©ãƒ¼ãƒ )
7. [è«‹æ±‚å…ˆæ‹…å½“è€…ã®è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³](#è«‹æ±‚å…ˆæ‹…å½“è€…ã®è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³)
8. [æ¥è§¦å±¥æ­´ç®¡ç†](#æ¥è§¦å±¥æ­´ç®¡ç†)
9. [é‹ç”¨KPIã‚·ãƒ¼ãƒˆ](#é‹ç”¨kpiã‚·ãƒ¼ãƒˆ)

---

## ã‚¹ãƒ†ãƒ¼ã‚¸é·ç§»ãƒ­ã‚¸ãƒƒã‚¯

`src/lib/stage-transition/` ã«ã‚¹ãƒ†ãƒ¼ã‚¸é·ç§»ã®åˆ¤å®šãƒ»æ¤œè¨¼ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã€‚

### ã‚¤ãƒ™ãƒ³ãƒˆç¨®åˆ¥ï¼ˆevent_typeï¼‰

| å€¤ | æ„å‘³ | ç™ºç”Ÿã‚¿ã‚¤ãƒŸãƒ³ã‚° |
|----|------|---------------|
| commit | æ–°è¦ç›®æ¨™è¨­å®š | ç›®æ¨™ãŒãªã„çŠ¶æ…‹ã‹ã‚‰æ–°ã—ãç›®æ¨™ã‚’è¨­å®š |
| achieved | ç›®æ¨™é”æˆ | ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¸ãŒç›®æ¨™ã‚¹ãƒ†ãƒ¼ã‚¸ã«åˆ°é” |
| recommit | ç›®æ¨™å¤‰æ›´ | ç›®æ¨™ã‚¹ãƒ†ãƒ¼ã‚¸ã¾ãŸã¯ç›®æ¨™æ—¥ã‚’å¤‰æ›´ |
| progress | å‰é€² | ç›®æ¨™ã¨ã¯é–¢ä¿‚ãªãã‚¹ãƒ†ãƒ¼ã‚¸ãŒå‰ã«é€²ã‚“ã  |
| back | å¾Œé€€ | ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¸ãŒå‰ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã«æˆ»ã£ãŸ |
| cancel | ç›®æ¨™å–æ¶ˆ | ç›®æ¨™ã‚’é”æˆã›ãšã«å‰Šé™¤ã—ãŸ |

### ã‚¤ãƒ™ãƒ³ãƒˆæ¤œå‡ºãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ

```
ä¿å­˜ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸ
        â”‚
        â–¼
current_stage_idã¯å¤‰æ›´ã•ã‚ŒãŸï¼Ÿ
        â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
   YES       NO
   â”‚         â”‚
   â–¼         â–¼
ç›®æ¨™ã¨ä¸€è‡´ï¼Ÿ ç›®æ¨™é–¢é€£ã¯å¤‰æ›´ã•ã‚ŒãŸï¼Ÿ
   â”‚              â”‚
 â”Œâ”€â”´â”€â”       â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
YES  NO     YES        NO
 â”‚   â”‚       â”‚         â”‚
 â–¼   â–¼       â–¼         â–¼
achieved  é †ç•ªã‚’æ¯”è¼ƒ  ä»¥å‰ç›®æ¨™ã‚ã‚Šï¼Ÿ  ä½•ã‚‚ã—ãªã„
 â”‚         â”‚           â”‚
 â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”   â”Œâ”€â”€â”´â”€â”€â”
 â”‚   ä¸ŠãŒã£ãŸ  ä¸‹ãŒã£ãŸ  YES    NO
 â”‚    â”‚         â”‚      â”‚     â”‚
 â”‚    â–¼         â–¼      â–¼     â–¼
 â”‚  progress   back  ç›®æ¨™æ®‹ã£ãŸï¼Ÿ commit
 â”‚                      â”‚
 â”‚                 â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
 â”‚                YES       NO
 â”‚                 â”‚         â”‚
 â”‚                 â–¼         â–¼
 â”‚              recommit   cancel
 â”‚
 â–¼
æ¬¡ã®ç›®æ¨™ã‚‚åŒæ™‚ã«è¨­å®šã•ã‚ŒãŸï¼Ÿ â†’ YES â†’ +commit
```

---

## ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½

ã‚¹ãƒ†ãƒ¼ã‚¸å¤‰æ›´æ™‚ã«18ç¨®é¡ã®ã‚¢ãƒ©ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ«ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã€‚

| ã‚«ãƒ†ã‚´ãƒª | ID | æ·±åˆ»åº¦ | æ¦‚è¦ |
|---------|-----|--------|-----|
| è«–ç†ã‚¨ãƒ©ãƒ¼ | L-001ã€œL-005 | ERROR/WARNING | ç›®æ¨™è¨­å®šã®çŸ›ç›¾ãƒã‚§ãƒƒã‚¯ |
| æ™‚ç³»åˆ—ã‚¨ãƒ©ãƒ¼ | T-001ã€œT-003 | ERROR/WARNING/INFO | ç›®æ¨™æ—¥ã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯ |
| é·ç§»ã‚¨ãƒ©ãƒ¼ | S-001ã€œS-004 | WARNING/INFO | ã‚¹ãƒ†ãƒ¼ã‚¸é·ç§»ã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯ |
| ç›®æ¨™ç®¡ç† | G-001ã€œG-005 | ERROR/WARNING/INFO | ç›®æ¨™å¤‰æ›´ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒã‚§ãƒƒã‚¯ |
| ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ | D-001, D-003 | ERROR/WARNING | å¿…é ˆé …ç›®ãƒ»ç†ç”±å…¥åŠ›ãƒã‚§ãƒƒã‚¯ |

### æ·±åˆ»åº¦ã¨å¯¾å¿œ

- **ERROR**: ä¿å­˜ãƒ–ãƒ­ãƒƒã‚¯ã€ä¿®æ­£å¿…é ˆ
- **WARNING**: è­¦å‘Šè¡¨ç¤ºã€ç¢ºèªå¾Œã«ä¿å­˜å¯èƒ½ï¼ˆä¸€éƒ¨ã¯ç†ç”±å…¥åŠ›å¿…é ˆï¼‰
- **INFO**: æƒ…å ±è¡¨ç¤ºã€ãã®ã¾ã¾ä¿å­˜å¯èƒ½

---

## ã‚¹ãƒ†ãƒ¼ã‚¸ç®¡ç†ãƒ¢ãƒ¼ãƒ€ãƒ«

STPä¼æ¥­ä¸€è¦§ã®ğŸ“Šãƒœã‚¿ãƒ³ã‹ã‚‰é–‹ãå°‚ç”¨ãƒ¢ãƒ¼ãƒ€ãƒ«ã€‚

### æ©Ÿèƒ½

1. ç¾åœ¨ã®çŠ¶æ³ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸ã€æ»åœ¨æ—¥æ•°ã€ç›®æ¨™æƒ…å ±ï¼‰
2. ã‚¹ãƒ†ãƒ¼ã‚¸é€²æ—ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ï¼ˆæ¨ªä¸€åˆ—ã®ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¡¨ç¤ºï¼‰
3. ã‚¹ãƒ†ãƒ¼ã‚¸å±¥æ­´ï¼ˆæœ€æ–°5ä»¶ã€å…¨ä»¶è¡¨ç¤ºå¯èƒ½ï¼‰
4. çµ±è¨ˆæƒ…å ±ï¼ˆé”æˆå›æ•°ã€é”æˆç‡ã€å¾Œé€€å›æ•°ï¼‰
5. ã‚¹ãƒ†ãƒ¼ã‚¸æ›´æ–°ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

### æ“ä½œåˆ†é›¢

- **æ–°è¦ç™»éŒ²æ™‚**: ãƒ•ã‚©ãƒ¼ãƒ ã§ã‚¹ãƒ†ãƒ¼ã‚¸å…¥åŠ›å¯èƒ½
- **ç·¨é›†æ™‚**: ã‚¹ãƒ†ãƒ¼ã‚¸é–¢é€£ã¯èª­ã¿å–ã‚Šå°‚ç”¨ã€å¤‰æ›´ã¯ãƒ¢ãƒ¼ãƒ€ãƒ«ã‹ã‚‰

---

## å¤–éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼

NextAuth.jsã‚’ä½¿ç”¨ã—ãŸèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã€‚

### èªè¨¼ãƒ•ãƒ­ãƒ¼

1. `/login` ã§ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›
2. NextAuthãŒCredentialsProviderã§èªè¨¼
3. ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ä¿å­˜
4. ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§ä¿è­·ã•ã‚ŒãŸãƒ«ãƒ¼ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶å¾¡

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

- `pending_email`: ãƒ¡ãƒ¼ãƒ«èªè¨¼å¾…ã¡
- `pending_approval`: ç®¡ç†è€…æ‰¿èªå¾…ã¡
- `active`: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ï¼ˆãƒ­ã‚°ã‚¤ãƒ³å¯èƒ½ï¼‰
- `suspended`: åœæ­¢ä¸­

### å¤–éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™»éŒ²ãƒ•ãƒ­ãƒ¼

1. ç®¡ç†è€…ãŒç™»éŒ²ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œ
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒˆãƒ¼ã‚¯ãƒ³URLçµŒç”±ã§ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã«ã‚¢ã‚¯ã‚»ã‚¹
3. å¿…è¦æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ç™»éŒ²
4. ãƒ¡ãƒ¼ãƒ«èªè¨¼ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯
5. ç®¡ç†è€…ãŒæ‰¿èª
6. ãƒ­ã‚°ã‚¤ãƒ³å¯èƒ½ã«

---

## ç¤¾å†…ã‚¹ã‚¿ãƒƒãƒ•èªè¨¼

NextAuth.jsã‚’ä½¿ç”¨ã—ãŸç¤¾å†…ã‚¹ã‚¿ãƒƒãƒ•å‘ã‘èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã€‚

### èªè¨¼ãƒ•ãƒ­ãƒ¼

1. `/login` ã§ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›
2. `MasterStaff` ãƒ†ãƒ¼ãƒ–ãƒ«ã§ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ¤œç´¢
3. `passwordHash` ãŒã‚ã‚Š `isActive` ãŒ `true` ã®å ´åˆã€bcryptã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¤œè¨¼
4. èªè¨¼æˆåŠŸæ™‚ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ã¨æ¨©é™ã‚’ä¿å­˜

### ç¤¾å†…ã‚¹ã‚¿ãƒƒãƒ•ã®ç™»éŒ²ãƒ•ãƒ­ãƒ¼ï¼ˆæ‹›å¾…æ–¹å¼ï¼‰

```
ç®¡ç†è€…ãŒ /staff ã§ã‚¹ã‚¿ãƒƒãƒ•ç™»éŒ²ï¼ˆåå‰ãƒ»ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»å½¹å‰²ï¼‰
  â†“
ã€Œæ‹›å¾…é€ä¿¡ã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
  â†“
æ‹›å¾…ãƒ¡ãƒ¼ãƒ«ãŒå±Šãï¼ˆ/staff/setup/[token] ãƒªãƒ³ã‚¯ä»˜ãï¼‰
  â†“
ã‚¹ã‚¿ãƒƒãƒ•ãŒãƒªãƒ³ã‚¯ã‹ã‚‰ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®š
  â†“
è¨­å®šå®Œäº† â†’ /login ã¸ â†’ ã™ãã«ãƒ­ã‚°ã‚¤ãƒ³å¯èƒ½ï¼ˆæ‰¿èªä¸è¦ï¼‰
```

### æ‹›å¾…ãƒˆãƒ¼ã‚¯ãƒ³

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | èª¬æ˜ |
|-----------|------|
| `inviteToken` | æ‹›å¾…ç”¨ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆ64æ–‡å­—ã€ãƒ¦ãƒ‹ãƒ¼ã‚¯ï¼‰ |
| `inviteTokenExpiresAt` | ãƒˆãƒ¼ã‚¯ãƒ³æœ‰åŠ¹æœŸé™ï¼ˆ24æ™‚é–“ï¼‰ |

### ã‚¹ã‚¿ãƒƒãƒ•ä¸€è¦§ã®ã€Œã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€ã‚«ãƒ©ãƒ è¡¨ç¤º

| çŠ¶æ…‹ | è¡¨ç¤º |
|------|------|
| ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®šæ¸ˆã¿ | âœ… è¨­å®šæ¸ˆã¿ |
| ãƒ¡ãƒ¼ãƒ«ã‚ã‚Šãƒ»æ‹›å¾…æ¸ˆã¿ãƒ»æœ‰åŠ¹æœŸé™å†… | ğŸ• æ‹›å¾…ä¸­ + å†é€ä¿¡ãƒœã‚¿ãƒ³ |
| ãƒ¡ãƒ¼ãƒ«ã‚ã‚Šãƒ»æœªæ‹›å¾… or æœŸé™åˆ‡ã‚Œ | æ‹›å¾…é€ä¿¡ãƒœã‚¿ãƒ³ |
| ãƒ¡ãƒ¼ãƒ«ãªã— | ãƒ¡ãƒ¼ãƒ«æœªè¨­å®š |

### æ³¨æ„äº‹é …

- ã‚¹ã‚¿ãƒƒãƒ•è¿½åŠ æ™‚ã€`isActive` ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `true`
- `isActive` ãŒ `false` ã®å ´åˆã€ãƒ­ã‚°ã‚¤ãƒ³ã§ããªã„
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®šå®Œäº†å¾Œã€`inviteToken` ã¯ `null` ã«ã‚¯ãƒªã‚¢ã•ã‚Œã‚‹

### é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `src/auth.ts` | èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆã‚¹ã‚¿ãƒƒãƒ•ãƒ»å¤–éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸¡å¯¾å¿œï¼‰ |
| `src/app/staff/actions.ts` | ã‚¹ã‚¿ãƒƒãƒ•CRUD + æ‹›å¾…é€ä¿¡ |
| `src/app/staff/staff-table.tsx` | ã‚¹ã‚¿ãƒƒãƒ•ä¸€è¦§ï¼ˆæ‹›å¾…ãƒœã‚¿ãƒ³å«ã‚€ï¼‰ |
| `src/app/staff/setup/[token]/page.tsx` | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®šãƒšãƒ¼ã‚¸ |
| `src/app/api/staff/setup/route.ts` | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®šAPI |
| `src/app/api/staff/setup/validate/[token]/route.ts` | ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼API |
| `src/lib/email/index.ts` | æ‹›å¾…ãƒ¡ãƒ¼ãƒ«é€ä¿¡ |
| `src/middleware.ts` | `/staff/setup` ã‚’å…¬é–‹ãƒ‘ã‚¹ã«è¨­å®š |

---

## ãƒªãƒ¼ãƒ‰ç²å¾—ãƒ•ã‚©ãƒ¼ãƒ 

ä»£ç†åº—çµŒç”±ã§ãƒªãƒ¼ãƒ‰ã‚’ç²å¾—ã™ã‚‹ãŸã‚ã®å…¬é–‹ãƒ•ã‚©ãƒ¼ãƒ ã€‚

### ãƒ•ãƒ­ãƒ¼

1. ä»£ç†åº—ã”ã¨ã«ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™ºè¡Œ
2. `/form/stp-lead/[token]` ã§ãƒ•ã‚©ãƒ¼ãƒ ã«ã‚¢ã‚¯ã‚»ã‚¹
3. å›ç­”ãƒ‡ãƒ¼ã‚¿ã¯ `stp_lead_form_submissions` ã«ä¿å­˜
4. ç®¡ç†ç”»é¢ `/stp/lead-submissions` ã§å›ç­”ã‚’ç¢ºèªãƒ»å‡¦ç†

---

## è«‹æ±‚å…ˆæ‹…å½“è€…ã®è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³

### è¨­è¨ˆæ–¹é‡ï¼šæ‹…å½“è€…IDã®ã¿ä¿å­˜ã€è¡¨ç¤ºæ™‚ã«å°å‡º

è«‹æ±‚å…ˆæ‹…å½“è€…ã¯**æ‹…å½“è€…ãƒã‚¹ã‚¿ï¼ˆStellaCompanyContactï¼‰ã§ä¸€å…ƒç®¡ç†**ã—ã€StpCompanyã«ã¯**æ‹…å½“è€…IDã®ã¿ä¿å­˜**ã™ã‚‹è¨­è¨ˆã€‚

```
StpCompany
â””â”€â”€ billingRepresentative: "1,3,5"  â† æ‹…å½“è€…IDï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰ã®ã¿ä¿å­˜

â†“ è¡¨ç¤ºæ™‚ã«StellaCompanyContactã‹ã‚‰å°å‡º

"ç”°ä¸­å¤ªéƒ (tanaka@example.com)"
"å±±ç”°èŠ±å­ (yamada@example.com)"
```

### ãªãœã“ã®è¨­è¨ˆã‹

| è¦³ç‚¹ | èª¬æ˜ |
|------|------|
| ãƒ‡ãƒ¼ã‚¿ã®æ­£è¦åŒ– | æ‹…å½“è€…æƒ…å ±ã¯1ç®‡æ‰€ï¼ˆãƒã‚¹ã‚¿ï¼‰ã§ç®¡ç†ã€å†—é•·ãªä¿å­˜ã‚’é¿ã‘ã‚‹ |
| è‡ªå‹•åæ˜  | æ‹…å½“è€…ãƒã‚¹ã‚¿ã§ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚„åå‰ãŒå¤‰æ›´ã•ã‚Œã‚‹ã¨ã€è‡ªå‹•çš„ã«æœ€æ–°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ |
| ã‚·ãƒ³ãƒ—ãƒ« | ä¿å­˜æ™‚ã®å°å‡ºãƒ­ã‚¸ãƒƒã‚¯ãŒä¸è¦ |

### å‰Šé™¤ã—ãŸå†—é•·ã‚«ãƒ©ãƒ 

ä»¥ä¸‹ã®ã‚«ãƒ©ãƒ ã¯ä¸è¦ã¨ã—ã¦å‰Šé™¤æ¸ˆã¿ï¼š

| å‰Šé™¤ã‚«ãƒ©ãƒ  | ç†ç”± |
|-----------|------|
| `billingEmail` | æ‹…å½“è€…IDã‹ã‚‰å°å‡ºå¯èƒ½ |
| `billingEmailSource` | æœªä½¿ç”¨ |
| `billingContactId` | `billingRepresentative`ï¼ˆè¤‡æ•°å¯¾å¿œï¼‰ã§ä»£æ›¿ |

### å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

**1. ãƒ‡ãƒ¼ã‚¿å–å¾—æ™‚ï¼ˆpage.tsxï¼‰ï¼šIDã‹ã‚‰åå‰ãƒ»ãƒ¡ãƒ¼ãƒ«ã‚’å°å‡º**

```typescript
// billingRepresentativeã«ã¯æ‹…å½“è€…IDãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹
billingContactIds: c.billingRepresentative,
// è«‹æ±‚å…ˆæ‹…å½“è€…ï¼ˆåå‰ã¨ãƒ¡ãƒ¼ãƒ«ã‚’çµ±åˆè¡¨ç¤ºï¼‰
billingContacts: (() => {
  if (!c.billingRepresentative) return null;
  const contactIds = c.billingRepresentative.split(",").map((id) => Number(id.trim()));
  const contactInfoList = contactIds
    .map((id) => {
      const contact = c.company.contacts.find((contact) => contact.id === id);
      if (!contact) return null;
      return contact.email ? `${contact.name} (${contact.email})` : contact.name;
    })
    .filter((info): info is string => !!info);
  return contactInfoList.length > 0 ? contactInfoList : null;
})(),
```

**2. ã‚«ãƒ©ãƒ å®šç¾©ï¼ˆstp-companies-table.tsxï¼‰ï¼š1ã‚«ãƒ©ãƒ ã«çµ±åˆ**

```typescript
// è«‹æ±‚å…ˆæ‹…å½“è€…ï¼ˆé¸æŠç”¨ã€éè¡¨ç¤ºï¼‰- ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›†å¯èƒ½
{ key: "billingContactIds", header: "è«‹æ±‚å…ˆæ‹…å½“è€…ï¼ˆé¸æŠï¼‰", type: "multiselect",
  dynamicOptionsKey: "billingContactIds", dependsOn: "companyId", hidden: true, inlineEditable: true },
// è«‹æ±‚å…ˆæ‹…å½“è€…ï¼ˆåå‰ã¨ãƒ¡ãƒ¼ãƒ«ã‚’çµ±åˆè¡¨ç¤ºï¼‰
{ key: "billingContacts", header: "è«‹æ±‚å…ˆæ‹…å½“è€…", editable: false },
```

**3. ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ç·¨é›†ãƒãƒƒãƒ”ãƒ³ã‚°**

```typescript
displayToEditMapping: {
  "billingContacts": "billingContactIds",  // è¡¨ç¤ºã‚«ãƒ©ãƒ  â†’ ç·¨é›†ã‚«ãƒ©ãƒ 
},
```

**4. ã‚«ã‚¹ã‚¿ãƒ ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ï¼šé…åˆ—ã‚’ç¸¦ä¸¦ã³è¡¨ç¤º**

```typescript
billingContacts: (value) => {
  if (!value || !Array.isArray(value) || value.length === 0) return "-";
  return (
    <div className="flex flex-col gap-1">
      {value.map((contact, index) => (
        <div key={index} className="text-sm">{contact}</div>
      ))}
    </div>
  );
},
```

**5. ä¿å­˜æ™‚ï¼ˆactions.tsï¼‰ï¼šIDã®ã¿ä¿å­˜**

```typescript
// è«‹æ±‚å…ˆæ‹…å½“è€…IDsï¼ˆè¤‡æ•°ï¼‰- billingRepresentativeã«ä¿å­˜
if ("billingContactIds" in data) {
  const billingContactIds = toCommaSeparatedString(data.billingContactIds);
  updateData.billingRepresentative = billingContactIds;
}
```

### å°†æ¥ã®è«‹æ±‚æ›¸è‡ªå‹•é€ä¿¡ã¸ã®å¯¾å¿œ

è«‹æ±‚æ›¸é€ä¿¡æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹éš›ã¯ã€**é€ä¿¡å±¥æ­´ã«é€ä¿¡æ™‚ç‚¹ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¨˜éŒ²**ã™ã‚‹è¨­è¨ˆã‚’æ¨å¥¨ï¼š

```
StpCompanyï¼ˆç¾åœ¨ï¼‰
â””â”€â”€ billingRepresentative: "1,3"  â† æ‹…å½“è€…IDã®ã¿

â†“ è«‹æ±‚æ›¸é€ä¿¡æ™‚

Invoiceï¼ˆå°†æ¥ä½œæˆï¼‰
â”œâ”€â”€ stpCompanyId
â”œâ”€â”€ sentAt: 2026-02-04
â”œâ”€â”€ sentToEmail: "tanaka@example.com"  â† é€ä¿¡æ™‚ç‚¹ã®ãƒ¡ãƒ¼ãƒ«ã‚’è¨˜éŒ²
â”œâ”€â”€ sentToName: "ç”°ä¸­å¤ªéƒ"
â””â”€â”€ ...
```

**ç†ç”±ï¼š**
- ã€Œã“ã®è«‹æ±‚æ›¸ã€ã©ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã«é€ã£ãŸï¼Ÿã€ã‚’å¾Œã‹ã‚‰ç¢ºèªå¯èƒ½
- æ‹…å½“è€…ãƒã‚¹ã‚¿å¤‰æ›´å¾Œã‚‚ã€éå»ã®é€ä¿¡å±¥æ­´ã¯æ­£ç¢ºã«æ®‹ã‚‹

---

## æ¥è§¦å±¥æ­´ç®¡ç†

STPä¼æ¥­ãŠã‚ˆã³ä»£ç†åº—ã¨ã®æ¥è§¦è¨˜éŒ²ã‚’ç®¡ç†ã™ã‚‹æ©Ÿèƒ½ã€‚

### ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

æ¥è§¦å±¥æ­´ã¯ `contact_histories` ãƒ†ãƒ¼ãƒ–ãƒ«ã§å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…±é€šã«ç®¡ç†ã€‚`contact_history_roles` ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«ã§é¡§å®¢ç¨®åˆ¥ã¨ã®ç´ä»˜ã‘ã‚’è¡Œã†ã€‚

### ä¼æ¥­æ¥è§¦ã¨ä»£ç†åº—æ¥è§¦ã®é•ã„

| é …ç›® | ä¼æ¥­æ¥è§¦å±¥æ­´ | ä»£ç†åº—æ¥è§¦å±¥æ­´ |
|------|------------|--------------|
| ä¸€è¦§ç”»é¢ãƒ‘ã‚¹ | `/stp/records/company-contacts` | `/stp/records/agent-contacts` |
| ç·¨é›†æ–¹æ³• | STPä¼æ¥­ä¸€è¦§ã®ãƒ¢ãƒ¼ãƒ€ãƒ« or ä¸€è¦§ç”»é¢ | ä»£ç†åº—ä¸€è¦§ã®ãƒ¢ãƒ¼ãƒ€ãƒ« or ä¸€è¦§ç”»é¢ |

### CRUDæ“ä½œ

#### æ–°è¦ä½œæˆ

```typescript
// src/app/stp/companies/contact-history-actions.ts
export async function addContactHistory(
  companyId: number,
  data: {
    contactDate: string;
    contactMethodId?: number | null;
    assignedTo?: string | null;        // ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã®ã‚¹ã‚¿ãƒƒãƒ•ID
    customerParticipants?: string | null;
    meetingMinutes?: string | null;
    note?: string | null;
    customerTypeIds: number[];         // é¸æŠã•ã‚ŒãŸé¡§å®¢ç¨®åˆ¥IDé…åˆ—
  }
)
```

#### è«–ç†å‰Šé™¤

å‰Šé™¤æ“ä½œã¯ `deletedAt` ã«ç¾åœ¨æ—¥æ™‚ã‚’ã‚»ãƒƒãƒˆã€‚ç‰©ç†å‰Šé™¤ã¯è¡Œã‚ãªã„ã€‚

```typescript
export async function deleteContactHistory(id: number) {
  await prisma.contactHistory.update({
    where: { id },
    data: { deletedAt: new Date() },
  });
}
```

### æ‹…å½“è€…ã®è¤‡æ•°é¸æŠãƒ­ã‚¸ãƒƒã‚¯

æ‹…å½“è€…ï¼ˆ`assignedTo`ï¼‰ã¯è¤‡æ•°ã®ã‚¹ã‚¿ãƒƒãƒ•IDã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§ä¿å­˜ã€‚

```typescript
// é¸æŠ/è§£é™¤ãƒ­ã‚¸ãƒƒã‚¯
const handleStaffChange = (staffId: string) => {
  const currentIds = (formData.assignedTo || "").split(",").filter(Boolean);
  const isSelected = currentIds.includes(staffId);

  let newIds: string[];
  if (isSelected) {
    newIds = currentIds.filter((id) => id !== staffId);
  } else {
    newIds = [...currentIds, staffId];
  }

  setFormData({ ...formData, assignedTo: newIds.join(",") });
};

// IDã‚’åå‰ã«å¤‰æ›ï¼ˆè¡¨ç¤ºæ™‚ï¼‰
const assignedNames = (assignedTo || "")
  .split(",")
  .filter(Boolean)
  .map((id) => staffMap[id]?.name || id)
  .join(", ");
```

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–

Server Actionå®Ÿè¡Œå¾Œã€é–¢é€£ãƒ‘ã‚¹ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡åŠ¹åŒ–ï¼š

```typescript
// ä¼æ¥­æ¥è§¦å±¥æ­´
revalidatePath("/stp/companies");
revalidatePath("/stp/records/company-contacts");

// ä»£ç†åº—æ¥è§¦å±¥æ­´
revalidatePath("/stp/agents");
revalidatePath("/stp/records/agent-contacts");
```

### é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `src/app/stp/companies/contact-history-actions.ts` | ä¼æ¥­æ¥è§¦å±¥æ­´CRUD |
| `src/app/stp/companies/contact-history-modal.tsx` | ä¼æ¥­æ¥è§¦å±¥æ­´ãƒ¢ãƒ¼ãƒ€ãƒ« |
| `src/app/stp/agents/contact-history-actions.ts` | ä»£ç†åº—æ¥è§¦å±¥æ­´CRUD |
| `src/app/stp/agents/contact-history-modal.tsx` | ä»£ç†åº—æ¥è§¦å±¥æ­´ãƒ¢ãƒ¼ãƒ€ãƒ« |
| `src/app/stp/records/company-contacts/page.tsx` | ä¼æ¥­æ¥è§¦å±¥æ­´ä¸€è¦§ãƒšãƒ¼ã‚¸ |
| `src/app/stp/records/agent-contacts/page.tsx` | ä»£ç†åº—æ¥è§¦å±¥æ­´ä¸€è¦§ãƒšãƒ¼ã‚¸ |

---

## é‹ç”¨KPIã‚·ãƒ¼ãƒˆ

STPä¼æ¥­ã®é‹ç”¨æˆæœã‚’é€±å˜ä½ã§ç®¡ç†ã™ã‚‹KPIã‚·ãƒ¼ãƒˆæ©Ÿèƒ½ã€‚åª’ä½“ã”ã¨ï¼ˆIndeedã€Wantedlyç­‰ï¼‰ã«ã‚·ãƒ¼ãƒˆã‚’ä½œæˆã—ã€ç›®æ¨™ãƒ»å®Ÿç¸¾ãƒ»å·®åˆ†ã‚’ç®¡ç†ã€‚

### æ©Ÿèƒ½æ¦‚è¦

1. **ã‚·ãƒ¼ãƒˆç®¡ç†**: åª’ä½“ã”ã¨ã«KPIã‚·ãƒ¼ãƒˆã‚’ä½œæˆãƒ»å‰Šé™¤
2. **é€±æ¬¡ãƒ‡ãƒ¼ã‚¿**: é€±å˜ä½ã§ç›®æ¨™å€¤ãƒ»å®Ÿç¸¾å€¤ã‚’å…¥åŠ›
3. **è‡ªå‹•è¨ˆç®—**: è¨ˆç®—é …ç›®ã¯æ‰‹å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è‡ªå‹•ç®—å‡º
4. **å…±æœ‰ãƒªãƒ³ã‚¯**: æ™‚é–“åˆ¶é™ä»˜ãã®å…¬é–‹URLã‚’ç™ºè¡Œ

### ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

```
StpCompany (STPä¼æ¥­)
â””â”€â”€ StpKpiSheet (KPIã‚·ãƒ¼ãƒˆ: Indeed, Wantedly...)
    â”œâ”€â”€ StpKpiWeeklyData (é€±æ¬¡ãƒ‡ãƒ¼ã‚¿: 2/2ã€œ2/8, 2/9ã€œ2/15...)
    â”‚   â”œâ”€â”€ target* (ç›®æ¨™å€¤)
    â”‚   â””â”€â”€ actual* (å®Ÿç¸¾å€¤)
    â””â”€â”€ StpKpiShareLink (å…±æœ‰ãƒªãƒ³ã‚¯)
```

### KPIè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯

#### æ‰‹å…¥åŠ›é …ç›®ï¼ˆ4é …ç›®ï¼‰

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç›´æ¥å…¥åŠ›ã™ã‚‹é …ç›®ã€‚UIã§ã¯ã‚ªãƒ¬ãƒ³ã‚¸ç³»ã®èƒŒæ™¯è‰²ã§è¡¨ç¤ºã€‚

| é …ç›® | ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | å‹ |
|------|-------------|-----|
| è¡¨ç¤ºå›æ•° | impressions | INT |
| ã‚¯ãƒªãƒƒã‚¯æ•° | clicks | INT |
| å¿œå‹Ÿæ•° | applications | INT |
| è²»ç”¨ï¼ˆé‹ç”¨è²»è¾¼ã¿ï¼‰ | cost | INT |

#### è¨ˆç®—é …ç›®ï¼ˆ5é …ç›®ï¼‰

æ‰‹å…¥åŠ›é …ç›®ã‹ã‚‰è‡ªå‹•è¨ˆç®—ã•ã‚Œã‚‹é …ç›®ã€‚UIã§ã¯ç™½èƒŒæ™¯ã§è¡¨ç¤ºã€‚

| é …ç›® | ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | è¨ˆç®—å¼ | å‹ |
|------|-------------|--------|-----|
| è¡¨ç¤ºå˜ä¾¡ï¼ˆCPMï¼‰ | cpm | `cost Ã· impressions` | DECIMAL(10,2) |
| ã‚¯ãƒªãƒƒã‚¯ç‡ï¼ˆCTRï¼‰ | ctr | `clicks Ã· impressions Ã— 100` | DECIMAL(5,2) |
| ã‚¯ãƒªãƒƒã‚¯å˜ä¾¡ï¼ˆCPCï¼‰ | cpc | `cost Ã· clicks` | DECIMAL(10,2) |
| å¿œå‹Ÿç‡ï¼ˆCVRï¼‰ | cvr | `applications Ã· clicks Ã— 100` | DECIMAL(5,2) |
| å¿œå‹Ÿå˜ä¾¡ï¼ˆCPAï¼‰ | cpa | `cost Ã· applications` | DECIMAL(10,2) |

#### è¨ˆç®—å®Ÿè£…ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰

```typescript
// src/components/kpi-sheet/types.ts

export function calculateMetricValue(
  metricKey: KpiMetricKey,
  data: {
    impressions: number | null;
    clicks: number | null;
    applications: number | null;
    cost: number | null;
  }
): number | null {
  const { impressions, clicks, applications, cost } = data;

  switch (metricKey) {
    case "cpm": // è¡¨ç¤ºå˜ä¾¡ = è²»ç”¨ Ã· è¡¨ç¤ºå›æ•°
      if (cost === null || impressions === null || impressions === 0) return null;
      return cost / impressions;

    case "ctr": // ã‚¯ãƒªãƒƒã‚¯ç‡ = ã‚¯ãƒªãƒƒã‚¯æ•° Ã· è¡¨ç¤ºå›æ•° Ã— 100
      if (clicks === null || impressions === null || impressions === 0) return null;
      return (clicks / impressions) * 100;

    case "cpc": // ã‚¯ãƒªãƒƒã‚¯å˜ä¾¡ = è²»ç”¨ Ã· ã‚¯ãƒªãƒƒã‚¯æ•°
      if (cost === null || clicks === null || clicks === 0) return null;
      return cost / clicks;

    case "cvr": // å¿œå‹Ÿç‡ = å¿œå‹Ÿæ•° Ã· ã‚¯ãƒªãƒƒã‚¯æ•° Ã— 100
      if (applications === null || clicks === null || clicks === 0) return null;
      return (applications / clicks) * 100;

    case "cpa": // å¿œå‹Ÿå˜ä¾¡ = è²»ç”¨ Ã· å¿œå‹Ÿæ•°
      if (cost === null || applications === null || applications === 0) return null;
      return cost / applications;

    default:
      return null;
  }
}
```

**æ³¨æ„**: è¨ˆç®—é …ç›®ã¯DBã«ã‚‚ä¿å­˜ã•ã‚Œã‚‹ãŒã€è¡¨ç¤ºæ™‚ã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§å†è¨ˆç®—ã—ã¦æœ€æ–°å€¤ã‚’è¡¨ç¤ºã€‚

### å·®åˆ†è¨ˆç®—

å·®åˆ†è¡Œã¯ã€Œå®Ÿç¸¾ - ç›®æ¨™ã€ã§è¨ˆç®—ã€‚

```typescript
export function calculateDiff(
  targetValue: number | null,
  actualValue: number | null
): number | null {
  if (targetValue === null || actualValue === null) return null;
  return actualValue - targetValue;
}
```

- **æ­£ã®å€¤ï¼ˆç·‘è‰²ï¼‰**: ç›®æ¨™è¶…éé”æˆ
- **è² ã®å€¤ï¼ˆèµ¤è‰²ï¼‰**: ç›®æ¨™æœªé”

### å…±æœ‰ãƒªãƒ³ã‚¯

#### ç™ºè¡Œãƒ•ãƒ­ãƒ¼

1. ã‚·ãƒ¼ãƒˆè©³ç´°ç”»é¢ã§ã€Œå…±æœ‰ãƒªãƒ³ã‚¯ã‚’ç™ºè¡Œã€ãƒœã‚¿ãƒ³
2. æœ‰åŠ¹æœŸé™ã‚’é¸æŠï¼ˆ1æ™‚é–“/6æ™‚é–“/24æ™‚é–“/7æ—¥é–“ï¼‰
3. ãƒ©ãƒ³ãƒ€ãƒ ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆ64æ–‡å­—ï¼‰ã‚’ç”Ÿæˆ
4. URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¦å¤–éƒ¨å…±æœ‰

#### å…±æœ‰ãƒšãƒ¼ã‚¸ã®ç‰¹å¾´

- `/s/kpi/[token]` ã§å…¬é–‹ã‚¢ã‚¯ã‚»ã‚¹
- èªè¨¼ä¸è¦ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ã®ã¿ã§èªè¨¼ï¼‰
- é–²è¦§å°‚ç”¨ï¼ˆç·¨é›†ä¸å¯ï¼‰
- æœ‰åŠ¹æœŸé™è¡¨ç¤ºï¼ˆæ—¥æœ¬æ™‚é–“ï¼‰
- æœŸé™åˆ‡ã‚Œã¯è‡ªå‹•ã§ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

### é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `src/app/stp/companies/[id]/kpi/page.tsx` | KPIã‚·ãƒ¼ãƒˆç®¡ç†ãƒšãƒ¼ã‚¸ |
| `src/app/stp/companies/[id]/kpi/actions.ts` | KPIã‚·ãƒ¼ãƒˆCRUDï¼ˆServer Actionsï¼‰ |
| `src/app/s/kpi/[token]/page.tsx` | å…±æœ‰ãƒšãƒ¼ã‚¸ï¼ˆå…¬é–‹ï¼‰ |
| `src/components/kpi-sheet/index.ts` | KPIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ |
| `src/components/kpi-sheet/kpi-table.tsx` | KPIãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆãƒ¡ã‚¤ãƒ³UIï¼‰ |
| `src/components/kpi-sheet/kpi-cell.tsx` | ç·¨é›†å¯èƒ½ã‚»ãƒ« |
| `src/components/kpi-sheet/types.ts` | å‹å®šç¾©ãƒ»è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ |

### UIãƒ‡ã‚¶ã‚¤ãƒ³

#### ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       æœˆ        â”‚    2æœˆ    â”‚          â”‚          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      é–‹å§‹       â”‚  2æœˆ2æ—¥  â”‚  2æœˆ9æ—¥  â”‚  2æœˆ16æ—¥ â”‚  â† ç·¨é›†å¯èƒ½
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      çµ‚äº†       â”‚  2æœˆ8æ—¥  â”‚  2æœˆ15æ—¥ â”‚  2æœˆ22æ—¥ â”‚  â† è‡ªå‹•è¨ˆç®—
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      ç›®æ¨™       â”‚          â”‚          â”‚          â”‚  â† ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆé’ï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    è¡¨ç¤ºå›æ•°     â”‚    -     â”‚    -     â”‚    -     â”‚  â† æ‰‹å…¥åŠ›ï¼ˆamberèƒŒæ™¯ï¼‰
â”‚    è¡¨ç¤ºå˜ä¾¡     â”‚    -     â”‚    -     â”‚    -     â”‚  â† è¨ˆç®—ï¼ˆç™½èƒŒæ™¯ï¼‰
â”‚    ã‚¯ãƒªãƒƒã‚¯æ•°   â”‚    -     â”‚    -     â”‚    -     â”‚
â”‚    ...          â”‚          â”‚          â”‚          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      å®Ÿç¸¾       â”‚          â”‚          â”‚          â”‚  â† ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆç·‘ï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    è¡¨ç¤ºå›æ•°     â”‚    -     â”‚    -     â”‚    -     â”‚
â”‚    ...          â”‚          â”‚          â”‚          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      å·®åˆ†       â”‚          â”‚          â”‚          â”‚  â† ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆã‚°ãƒ¬ãƒ¼ï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    è¡¨ç¤ºå›æ•°     â”‚    -     â”‚    -     â”‚    -     â”‚  â† æ­£=ç·‘ã€è² =èµ¤
â”‚    ...          â”‚          â”‚          â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### è‰²è¨­è¨ˆ

| è¦ç´  | è‰² | Tailwindã‚¯ãƒ©ã‚¹ |
|------|-----|----------------|
| æ—¥ä»˜ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆé–‹å§‹/çµ‚äº†ï¼‰ | ã‚¹ãƒ¬ãƒ¼ãƒˆã‚°ãƒ¬ãƒ¼ | `bg-slate-600` |
| ç›®æ¨™ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ | è–„ã„é’ | `bg-blue-100` |
| å®Ÿç¸¾ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ | è–„ã„ç·‘ | `bg-emerald-100` |
| å·®åˆ†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ | è–„ã„ã‚°ãƒ¬ãƒ¼ | `bg-slate-100` |
| æ‰‹å…¥åŠ›ã‚»ãƒ« | è–„ã„ã‚¢ãƒ³ãƒãƒ¼ | `bg-amber-50` |
| è¨ˆç®—ã‚»ãƒ« | ç™½ | `bg-white` |
| å·®åˆ†ï¼ˆæ­£ï¼‰ | ç·‘æ–‡å­— | `text-green-600` |
| å·®åˆ†ï¼ˆè² ï¼‰ | èµ¤æ–‡å­— | `text-red-600` |
